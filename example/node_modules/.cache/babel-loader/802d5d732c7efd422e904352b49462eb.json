{"ast":null,"code":"import React, { memo, useState, useMemo, useEffect, useCallback, Fragment } from 'react';\nimport { createUrlMatchers, createPathFinder } from '@kode-frontend/pathfinder-web-core';\nimport intercept from 'fetch-intercept';\nvar styles = {\n  \"app\": \"_pathfinder-module__app__3ZqQ-\",\n  \"action\": \"_pathfinder-module__action__3WM2h\",\n  \"container\": \"_pathfinder-module__container__3iEa-\",\n  \"content\": \"_pathfinder-module__content__2RRB6\",\n  \"overlay\": \"_pathfinder-module__overlay__21sxm\"\n};\nvar styles$1 = {\n  \"wrapper\": \"_panel-button-module__wrapper__1ooOf\"\n};\n\nconst PanelButton = _ref => {\n  let {\n    onClick\n  } = _ref;\n  return React.createElement(\"button\", {\n    className: styles$1.wrapper,\n    onClick: onClick\n  }, React.createElement(\"svg\", {\n    xmlns: 'http://www.w3.org/2000/svg',\n    viewBox: '0 0 480 480',\n    width: 16,\n    height: 16\n  }, React.createElement(\"path\", {\n    d: 'M296 280h-8.8a7.873 7.873 0 01-7.408-5.168 130.268 130.268 0 00-3.152-7.544 7.888 7.888 0 011.6-8.928l6.272-6.28c9.311-9.393 9.294-24.541-.04-33.912l-22.608-22.608c-9.383-9.328-24.537-9.328-33.92 0l-6.272 6.264a7.921 7.921 0 01-8.928 1.6 172.395 172.395 0 00-7.552-3.2A7.864 7.864 0 01200 192.8V184c0-13.255-10.745-24-24-24h-32c-13.255 0-24 10.745-24 24v8.8a7.873 7.873 0 01-5.168 7.408c-2.56.976-5.064 2.024-7.544 3.152a7.91 7.91 0 01-8.928-1.6l-6.28-6.272c-9.382-9.322-24.53-9.322-33.912 0l-22.608 22.68c-9.328 9.383-9.328 24.537 0 33.92l6.264 6.272a7.888 7.888 0 011.6 8.928 133.954 133.954 0 00-3.16 7.552A7.863 7.863 0 0132.8 280H24c-13.255 0-24 10.745-24 24v32c0 13.255 10.745 24 24 24h8.8a7.873 7.873 0 017.408 5.168c.976 2.56 2.024 5.064 3.152 7.544a7.888 7.888 0 01-1.6 8.928l-6.272 6.28c-9.322 9.382-9.322 24.53 0 33.912l22.608 22.608c9.383 9.328 24.537 9.328 33.92 0l6.272-6.264a7.921 7.921 0 018.928-1.6 172.395 172.395 0 007.552 3.2A7.865 7.865 0 01120 447.2v8.8c0 13.255 10.745 24 24 24h32c13.255 0 24-10.745 24-24v-8.8a7.873 7.873 0 015.168-7.408c2.56-.976 5.064-2.024 7.544-3.152a7.91 7.91 0 018.928 1.6l6.28 6.272c9.395 9.307 24.539 9.289 33.912-.04l22.608-22.608c9.328-9.383 9.328-24.537 0-33.92l-6.264-6.272a7.888 7.888 0 01-1.6-8.928 172.395 172.395 0 003.2-7.552A7.864 7.864 0 01287.2 360h8.8c13.255 0 24-10.745 24-24v-32c0-13.255-10.745-24-24-24zm8 56a8 8 0 01-8 8h-8.8a24.08 24.08 0 00-22.4 15.472 110.562 110.562 0 01-2.752 6.616 24.071 24.071 0 004.8 26.848l6.256 6.264a8 8 0 01.006 11.314l-.006.006-22.608 22.608a8 8 0 01-11.312 0l-6.272-6.264a24.048 24.048 0 00-26.848-4.8 115.916 115.916 0 01-6.6 2.752A24.073 24.073 0 00184 447.2v8.8a8 8 0 01-8 8h-32a8 8 0 01-8-8v-8.8a24.08 24.08 0 00-15.472-22.4 110.562 110.562 0 01-6.616-2.752 24.08 24.08 0 00-26.848 4.8l-6.264 6.256a8 8 0 01-11.314.006l-.006-.006-22.608-22.584a8 8 0 010-11.312l6.264-6.272a24.071 24.071 0 004.8-26.848 115.916 115.916 0 01-2.752-6.6A24.072 24.072 0 0032.8 344H24a8 8 0 01-8-8v-32a8 8 0 018-8h8.8a24.08 24.08 0 0022.4-15.472c.848-2.24 1.765-4.445 2.752-6.616a24.073 24.073 0 00-4.8-26.848l-6.288-6.264a8 8 0 01-.006-11.314l.006-.006 22.608-22.608a8 8 0 0111.312 0l6.272 6.264a24.048 24.048 0 0026.848 4.8 115.916 115.916 0 016.6-2.752A24.072 24.072 0 00136 192.8V184a8 8 0 018-8h32a8 8 0 018 8v8.8a24.08 24.08 0 0015.472 22.4c2.24.848 4.445 1.765 6.616 2.752a24.048 24.048 0 0026.848-4.8l6.264-6.256a8.048 8.048 0 0111.32 0l22.608 22.608a8 8 0 010 11.312l-6.264 6.272a24.073 24.073 0 00-4.8 26.848 115.916 115.916 0 012.752 6.6A24.073 24.073 0 00287.2 296h8.8a8 8 0 018 8v32z'\n  }), React.createElement(\"path\", {\n    d: 'M231.84 316.8a72.249 72.249 0 00-.448-5.736c-.256-2.048-.56-4.08-.984-6.072-.28-1.304-.648-2.592-1-3.888a71.595 71.595 0 00-1.512-4.872c-.392-1.112-.8-2.216-1.216-3.312a71.27 71.27 0 00-3.528-7.488c-.104-.184-.168-.384-.272-.568a70.969 70.969 0 00-7.2-10.488c-.232-.288-.496-.56-.736-.84a66.945 66.945 0 00-3.432-3.776c-.624-.648-1.28-1.256-1.936-1.88-.8-.744-1.6-1.48-2.4-2.184a75.684 75.684 0 00-2.968-2.448l-1.312-.976A71.492 71.492 0 00160 248c-.8 0-1.6.12-2.4.152a69.66 69.66 0 00-5.136.32c-.904.096-1.816.2-2.72.328a73.35 73.35 0 00-7.752 1.448c-38.521 9.954-61.679 49.252-51.725 87.773a72.04 72.04 0 0051.781 51.739c.128 0 .264.04.4.072a76.301 76.301 0 008.384 1.6c1.864.232 3.728.28 5.6.368 1.248.064 2.4.248 3.704.248 2.28 0 4.648-.152 7.064-.392.256 0 .512-.072.8-.104a69.433 69.433 0 005.92-.904c.8-.152 1.544-.352 2.312-.528a75.52 75.52 0 004.248-1.096c1.12-.336 2.208-.728 3.304-1.112 1.096-.384 2.232-.8 3.368-1.232 1.136-.432 2.088-.928 3.12-1.408 1.344-.616 2.68-1.224 4-1.944h.048a94.691 94.691 0 0020.504-14.808 25.19 25.19 0 004.288-5.248 85.402 85.402 0 0012.048-32.88c.224-1.544.424-3.088.544-4.664.112-1.448.192-2.888.224-4.328 0-.456.064-.888.064-1.344.008-1.128-.104-2.168-.152-3.256zm-15.944 5.24c0 .664-.056 1.328-.096 1.984a63.065 63.065 0 01-.72 5.816 56.117 56.117 0 01-28.112 39.2 62.597 62.597 0 01-2.944 1.456l-.664.32a57.782 57.782 0 01-14.592 4.416c-.352.056-.712.12-1.072.168-1 .144-1.984.264-2.96.352a56.915 56.915 0 01-3.904.2h-1.672a56.13 56.13 0 01-5.664-.352l-.96-.112a59.2 59.2 0 01-6.536-1.232c-29.962-7.669-48.034-38.175-40.366-68.137a55.998 55.998 0 0140.31-40.351v-.008A57.931 57.931 0 01160 264a55.29 55.29 0 016.84.464c.608.072 1.208.184 1.808.272 1.728.272 3.44.616 5.128 1.048.552.144 1.104.272 1.648.424a56.491 56.491 0 0112.2 5.136c.616.36 1.216.736 1.824 1.112 1.264.8 2.488 1.6 3.696 2.512.648.472 1.304.936 1.928 1.44a57.721 57.721 0 014.504 4c.568.576 1.088 1.208 1.64 1.808.92 1 1.816 2.024 2.672 3.104a60.96 60.96 0 011.72 2.288c.8 1.152 1.6 2.352 2.32 3.568.4.664.8 1.312 1.208 1.992a54.898 54.898 0 012.752 5.864c.32.8.592 1.6.88 2.4.52 1.472.968 2.96 1.36 4.464.2.8.424 1.512.592 2.288.467 2.162.806 4.35 1.016 6.552.048.584.048 1.176.088 1.76.112 1.84.144 3.688.072 5.544zM456 168h-25.16a7.809 7.809 0 01-7.456-5.248 166.619 166.619 0 00-8.984-21.688 7.832 7.832 0 011.536-9.032l17.84-17.864c9.364-9.371 9.364-24.557 0-33.928L399.76 46.28c-9.371-9.364-24.557-9.364-33.928 0L348 64.104a7.832 7.832 0 01-9.024 1.544 166.2 166.2 0 00-21.696-9.032A7.808 7.808 0 01312 49.16V24c0-13.255-10.745-24-24-24h-48c-13.255 0-24 10.745-24 24v25.16a7.807 7.807 0 01-5.248 7.456 166.721 166.721 0 00-21.688 9.024 7.816 7.816 0 01-9.032-1.536l-17.864-17.84c-9.382-9.337-24.546-9.337-33.928 0L94.288 80.216c-9.369 9.372-9.369 24.564 0 33.936l26.232 26.28a8 8 0 0011.328-11.296L105.6 102.864a8 8 0 010-11.312L139.552 57.6a8 8 0 0111.312 0l17.872 17.84a23.784 23.784 0 0027.488 4.512 151.357 151.357 0 0119.608-8.152A23.8 23.8 0 00232 49.16V24a8 8 0 018-8h48a8 8 0 018 8v25.16a23.791 23.791 0 0016.168 22.632 150.888 150.888 0 0119.616 8.16 23.841 23.841 0 0027.48-4.52L377.136 57.6a8 8 0 0111.312 0L422.4 91.56a8 8 0 010 11.304l-17.84 17.872a23.808 23.808 0 00-4.512 27.488 151.357 151.357 0 018.152 19.608A23.791 23.791 0 00430.84 184H456a8 8 0 018 8v48a8 8 0 01-8 8h-25.16a23.791 23.791 0 00-22.632 16.168 150.75 150.75 0 01-8.16 19.616 23.817 23.817 0 004.52 27.48l17.84 17.872a8 8 0 010 11.312L388.44 374.4a8 8 0 01-11.304 0l-26.288-26.232a8 8 0 00-11.312-.18 8 8 0 00.016 11.508l26.28 26.232c9.371 9.364 24.557 9.364 33.928 0l33.952-33.944c9.369-9.372 9.369-24.564 0-33.936L415.896 300a7.84 7.84 0 01-1.544-9.024 166.2 166.2 0 009.032-21.696 7.808 7.808 0 017.456-5.28H456c13.255 0 24-10.745 24-24v-48c0-13.255-10.745-24-24-24z'\n  }), React.createElement(\"path\", {\n    d: 'M337.536 142.464c-40.638-40.553-106.434-40.553-147.072 0a8 8 0 0011.312 11.312c34.135-34.596 89.852-34.969 124.448-.834 34.596 34.135 34.969 89.852.834 124.448-.276.28-.554.558-.834.834a8 8 0 00-.196 11.312 8 8 0 0011.508 0c40.553-40.638 40.553-106.434 0-147.072z'\n  })));\n};\n\nvar styles$2 = {\n  \"wrapper\": \"_panel-module__wrapper__3B2TN\",\n  \"defaultControls\": \"_panel-module__defaultControls__10fMo\"\n};\nvar styles$3 = {\n  \"wrapper\": \"_button-module__wrapper__1WrYJ\",\n  \"transparent\": \"_button-module__transparent__UmHO9\",\n  \"active\": \"_button-module__active__bIxNe\"\n};\n\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\nfunction classNames(val) {\n  return val.filter(isString).join(' ');\n}\n\nconst Button = memo(_ref2 => {\n  let {\n    children,\n    transparent,\n    active,\n    onClick\n  } = _ref2;\n  return React.createElement(\"button\", {\n    className: classNames([styles$3.wrapper, transparent && styles$3.transparent, active && styles$3.active]),\n    onClick: onClick\n  }, children);\n});\nconst CloseIcon = memo(props => React.createElement(\"svg\", Object.assign({\n  xmlns: 'http://www.w3.org/2000/svg',\n  viewBox: '0 0 329.269 329'\n}, props), React.createElement(\"path\", {\n  d: 'M194.8 164.77L323.013 36.555c8.343-8.34 8.343-21.825 0-30.164-8.34-8.34-21.825-8.34-30.164 0L164.633 134.605 36.422 6.391c-8.344-8.34-21.824-8.34-30.164 0-8.344 8.34-8.344 21.824 0 30.164l128.21 128.215L6.259 292.984c-8.344 8.34-8.344 21.825 0 30.164a21.266 21.266 0 0015.082 6.25c5.46 0 10.922-2.09 15.082-6.25l128.21-128.214 128.216 128.214a21.273 21.273 0 0015.082 6.25c5.46 0 10.922-2.09 15.082-6.25 8.343-8.34 8.343-21.824 0-30.164zm0 0'\n})));\nvar styles$4 = {\n  \"wrapper\": \"_header-module__wrapper__MnDoK\",\n  \"title\": \"_header-module__title__3CS85\",\n  \"action\": \"_header-module__action__LI6vr\"\n};\nconst Header = memo(_ref3 => {\n  let {\n    children,\n    onClose\n  } = _ref3;\n  return React.createElement(\"div\", {\n    className: styles$4.wrapper\n  }, React.createElement(\"h1\", {\n    className: styles$4.title\n  }, children), React.createElement(\"div\", {\n    className: styles$4.action\n  }, React.createElement(Button, {\n    transparent: true,\n    onClick: onClose\n  }, React.createElement(CloseIcon, {\n    width: 16,\n    height: 16\n  }))));\n});\nvar styles$5 = {\n  \"endpointsTable\": \"_endpoints-list-module__endpointsTable__ecoeV\",\n  \"wrapper\": \"_endpoints-list-module__wrapper__3oiB-\",\n  \"item_wrapper\": \"_endpoints-list-module__item_wrapper__10jQv\",\n  \"item_reset\": \"_endpoints-list-module__item_reset__2EZr9\",\n  \"actions_wrapper\": \"_endpoints-list-module__actions_wrapper__2PdFx\",\n  \"endpointName\": \"_endpoints-list-module__endpointName__3iPjM\",\n  \"method\": \"_endpoints-list-module__method__1_YNV\",\n  \"GET\": \"_endpoints-list-module__GET__1L3OW\",\n  \"POST\": \"_endpoints-list-module__POST__pDCaj\",\n  \"DELETE\": \"_endpoints-list-module__DELETE__38zLc\",\n  \"PATCH\": \"_endpoints-list-module__PATCH__-N1TN\",\n  \"PUT\": \"_endpoints-list-module__PUT__zlav3\"\n};\nvar styles$6 = {\n  \"group\": \"_radio-group-module__group__3QtxZ\",\n  \"label\": \"_radio-group-module__label__3stAc\",\n  \"input\": \"_radio-group-module__input__3Paa8\"\n};\n\nconst RadioGroup = _ref4 => {\n  let {\n    id,\n    items,\n    value,\n    onChange\n  } = _ref4;\n  return React.createElement(\"div\", {\n    className: styles$6.group\n  }, items.map(item => React.createElement(\"label\", {\n    key: item.value,\n    className: styles$6.label\n  }, React.createElement(\"input\", {\n    onChange: () => onChange(id, item.value),\n    type: 'radio',\n    name: id,\n    value: item.value,\n    className: styles$6.input,\n    checked: item.value === value\n  }), item.label)));\n};\n\nconst EndpointsList = _ref5 => {\n  let {\n    environments,\n    items,\n    initialValues,\n    onChange\n  } = _ref5;\n  const [values, setValues] = useState(initialValues);\n  return React.createElement(\"div\", {\n    className: styles$5.wrapper\n  }, React.createElement(\"table\", {\n    className: styles$5.endpointsTable\n  }, items.map(item => React.createElement(\"tr\", {\n    key: item.id\n  }, React.createElement(\"td\", null, React.createElement(\"span\", {\n    className: `${styles$5[item.method]} ${styles$5.method}`\n  }, item.method)), React.createElement(\"td\", null, item.template, React.createElement(\"div\", {\n    className: styles$5.endpointName\n  }, item.name)), React.createElement(\"td\", null, React.createElement(RadioGroup, {\n    onChange: (id, value) => {\n      onChange(id, value || undefined);\n      setValues(prev => ({ ...prev,\n        [id]: value\n      }));\n    },\n    value: values[item.id],\n    id: item.id,\n    items: [...environments, {\n      label: 'Global',\n      value: ''\n    }]\n  }))))));\n};\n\nvar styles$7 = {\n  \"label\": \"_upload-spec-module__label__2O525\",\n  \"hide\": \"_upload-spec-module__hide__2KoRn\"\n};\n\nconst UploadSpec = _ref6 => {\n  let {\n    onLoad\n  } = _ref6;\n\n  const handleChange = event => {\n    const blob = event.target.files;\n\n    if (blob && blob[0]) {\n      const reader = new FileReader();\n      reader.onload = handleReaderLoad;\n      reader.readAsText(blob[0]);\n    }\n  };\n\n  const handleReaderLoad = event => {\n    if (event.target && typeof event.target.result === 'string') {\n      const json = JSON.parse(event.target.result);\n      onLoad(json);\n    }\n  };\n\n  return React.createElement(\"label\", {\n    className: styles$7.label,\n    htmlFor: 'upload-spec'\n  }, React.createElement(\"div\", {\n    className: styles$7.text\n  }, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0441\\u043F\\u0435\\u0446\\u0438\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u044E\"), React.createElement(\"input\", {\n    id: 'upload-spec',\n    className: styles$7.hide,\n    type: 'file',\n    onChange: handleChange,\n    accept: 'application/json'\n  }));\n};\n\nconst Panel = _ref7 => {\n  let {\n    config,\n    defaultEnvId,\n    onClose,\n    onChangeDefaultEnv,\n    onChangeUrlEnv,\n    onLoadSpec,\n    urlEnvInitialValues\n  } = _ref7;\n  const [defaultEnv, setDefaultValue] = useState(defaultEnvId || '');\n  const environments = useMemo(() => config.envList.map(env => ({\n    value: env.id,\n    label: env.name\n  })), [config]);\n  return React.createElement(\"div\", {\n    className: styles$2.wrapper\n  }, React.createElement(Header, {\n    onClose: onClose\n  }, \"Pathfinder\"), React.createElement(UploadSpec, {\n    onLoad: onLoadSpec\n  }), environments.length > 0 && React.createElement(\"table\", {\n    className: styles$2.defaultControls\n  }, React.createElement(\"tr\", null, React.createElement(\"td\", null, \"\\u0418\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u044C \\u043E\\u043A\\u0440\\u0443\\u0436\\u0435\\u043D\\u0438\\u0435 \\u0434\\u043B\\u044F \\u0432\\u0441\\u0435\\u0445 \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\\u043E\\u0432:\"), React.createElement(\"td\", null, React.createElement(RadioGroup, {\n    onChange: (_, value) => {\n      onChangeDefaultEnv(value || null);\n      setDefaultValue(value);\n    },\n    value: defaultEnv,\n    id: 'default',\n    items: [...environments, {\n      label: 'Default',\n      value: ''\n    }]\n  })))), config.urlList.length > 0 && React.createElement(EndpointsList, {\n    onChange: onChangeUrlEnv,\n    environments: environments,\n    items: config.urlList,\n    initialValues: urlEnvInitialValues\n  }));\n};\n\nfunction addConsoleActivation(set) {\n  window.setPathfinderActive = val => {\n    set(val);\n  };\n}\n\nfunction useRequestInterception(pathfinder, active) {\n  useEffect(() => {\n    if (!active) {\n      return;\n    }\n\n    const unregister = intercept.register({\n      request(url, config) {\n        const spec = pathfinder.getSpec();\n        const matchers = spec !== null && spec !== void 0 && spec.urls ? createUrlMatchers(spec.urls) : null;\n        const envSpecs = spec === null || spec === void 0 ? void 0 : spec.envs;\n        const method = (config === null || config === void 0 ? void 0 : config.method) || 'GET';\n        const newUrl = matchers ? pathfinder.buildUrl({\n          matchers,\n          method,\n          url,\n          envSpecs\n        }) : url;\n        return [newUrl, config];\n      }\n\n    });\n    return () => {\n      unregister();\n    };\n  }, [pathfinder, active]);\n  useEffect(() => {\n    if (!active) {\n      return;\n    }\n\n    const open = XMLHttpRequest.prototype.open;\n\n    XMLHttpRequest.prototype.open = function (method, url) {\n      const urlString = typeof url === 'string' ? url : url.toString();\n      const spec = pathfinder.getSpec();\n      const envSpecs = spec === null || spec === void 0 ? void 0 : spec.envs;\n      const matchers = spec !== null && spec !== void 0 && spec.urls ? createUrlMatchers(spec.urls) : null;\n      const newUrl = matchers ? pathfinder.buildUrl({\n        matchers,\n        method,\n        url: urlString,\n        envSpecs\n      }) : urlString;\n      arguments[1] = newUrl;\n      open.apply(this, arguments);\n    };\n\n    return () => {\n      XMLHttpRequest.prototype.open = open;\n    };\n  }, [pathfinder, active]);\n}\n\nconst toPanelUrl = url => ({\n  id: url.id,\n  method: url.method,\n  template: url.template,\n  name: url.name\n});\n\nconst toPanelEnv = env => ({\n  id: env.id,\n  name: env.name\n});\n\nconst Pathfinder = _ref8 => {\n  let {\n    children,\n    resolver,\n    storage,\n    active\n  } = _ref8;\n  const module = useMemo(() => {\n    return createPathFinder(resolver, storage);\n  }, [resolver, storage]);\n  const [spec, setSpec] = useState(module.getSpec());\n  const [isActive, setActive] = useState(active);\n  useEffect(() => {\n    addConsoleActivation(setActive);\n  }, [setActive]);\n  useRequestInterception(module, isActive || false);\n  const [isOpen, setOpen] = useState(false);\n  const handleToggle = useCallback(() => {\n    setOpen(prevState => !prevState);\n  }, []);\n\n  const handleChangeDefaultEnv = envId => {\n    module.setGlobalEnv(envId);\n  };\n\n  const handleChangeUrlEnv = (urlId, envId) => {\n    module.setUrlEnv(urlId, envId);\n  };\n\n  const handleLoadSpec = data => {\n    module.setSpec(data);\n    setSpec(module.getSpec());\n  };\n\n  const config = {\n    urlList: (spec === null || spec === void 0 ? void 0 : spec.urls.map(toPanelUrl)) || [],\n    envList: (spec === null || spec === void 0 ? void 0 : spec.envs.map(toPanelEnv)) || []\n  };\n\n  if (!isActive) {\n    return React.createElement(Fragment, null, children);\n  }\n\n  const initialUrlValues = {};\n  config.urlList.forEach(url => {\n    const envId = module.getUrlEnv(url.id);\n    initialUrlValues[url.id] = envId || '';\n  });\n  return React.createElement(Fragment, null, React.createElement(\"div\", {\n    className: styles.app\n  }, children), React.createElement(\"div\", {\n    className: styles.action\n  }, React.createElement(PanelButton, {\n    onClick: handleToggle\n  })), isOpen && React.createElement(\"div\", {\n    className: styles.container\n  }, React.createElement(\"div\", {\n    className: styles.overlay\n  }), React.createElement(\"div\", {\n    className: styles.content\n  }, React.createElement(Panel, {\n    onLoadSpec: handleLoadSpec,\n    config: config,\n    defaultEnvId: module.getGlobalEnv(),\n    onClose: handleToggle,\n    onChangeDefaultEnv: handleChangeDefaultEnv,\n    onChangeUrlEnv: handleChangeUrlEnv,\n    urlEnvInitialValues: initialUrlValues\n  }))));\n};\n\nexport { Pathfinder };","map":{"version":3,"mappings":";;;;;;;;;;;;;;AAOO,MAAMA,WAAW,GAAG;AAAA,MAAC;AAAEC;AAAF,GAAD;AACzB,SACEC;AAAQC,aAAS,EAAEC,QAAM,CAACC,OAA1B;AAAmCJ,WAAO,EAAEA;AAA5C,KACEC;AACEI,SAAK,EAAC,4BADR;AAEEC,WAAO,EAAC,aAFV;AAGEC,SAAK,EAAE,EAHT;AAIEC,UAAM,EAAE;AAJV,KAMEP;AAAMQ,KAAC,EAAC;AAAR,IANFR,EAOEA;AAAMQ,KAAC,EAAC;AAAR,IAPFR,EAQEA;AAAMQ,KAAC,EAAC;AAAR,IARFR,CADFA,CADF;AADK;;;;;;;;;;;;ACPP,SAASS,QAAT,CAAqBC,GAArB;AACE,SAAO,OAAOA,GAAP,KAAe,QAAtB;AACD;;AAED,SAAgBC,UAAhB,CAA8BD,GAA9B,EAA8BA;AAC5B,SAAOA,GAAG,CAACE,MAAJF,CAAWD,QAAXC,EAAqBG,IAArBH,CAA0B,GAA1BA,CAAP;AACD;;ACMM,MAAMI,MAAM,GAAGC,IAAI,CACxB;AAAA,MAAC;AAAEC,YAAF;AAAYC,eAAZ;AAAyBC,UAAzB;AAAiCnB;AAAjC,GAAD;AAAA,SACEC;AACEC,aAAS,EAAEU,UAAU,CAAC,CACpBT,QAAM,CAACC,OADa,EAEpBc,WAAW,IAAIf,QAAM,CAACe,WAFF,EAGpBC,MAAM,IAAIhB,QAAM,CAACgB,MAHG,CAAD,CADvB;AAMEnB,WAAO,EAAEA;AANX,KAQGiB,QARHhB,CADF;AAAA,CADwB,CAAnB;ACTA,MAAMmB,SAAS,GAAGJ,IAAI,CAAEK,KAAD,IAC5BpB;AAAKI,OAAK,EAAC,4BAAX;AAAwCC,SAAO,EAAC;AAAhD,GAAsEe,KAAtE,GACEpB;AAAMQ,GAAC,EAAC;AAAR,EADFR,CAD2B,CAAtB;;;;;;ACQA,MAAMqB,MAAM,GAAGN,IAAI,CAAC;AAAA,MAAC;AAAEC,YAAF;AAAYM;AAAZ,GAAD;AAAA,SACzBtB;AAAKC,aAAS,EAAEC,QAAM,CAACC;AAAvB,KACEH;AAAIC,aAAS,EAAEC,QAAM,CAACqB;AAAtB,KAA8BP,QAA9BhB,CADFA,EAEEA;AAAKC,aAAS,EAAEC,QAAM,CAACsB;AAAvB,KACExB,oBAACc,MAADd;AAAQiB,eAAW,MAAnB;AAAoBlB,WAAO,EAAEuB;AAA7B,KACEtB,oBAACmB,SAADnB;AAAWM,SAAK,EAAE,EAAlB;AAAsBC,UAAM,EAAE;AAA9B,IADFP,CADFA,CAFFA,CADyB;AAAA,CAAD,CAAnB;;;;;;;;;;;;;;;;;;;;;ACAA,MAAMyB,UAAU,GAAG;AAAA,MAAC;AACzBC,MADyB;AAEzBC,SAFyB;AAGzBC,SAHyB;AAIzBC;AAJyB,GAAD;AAAA,SAMxB7B;AAAKC,aAAS,EAAEC,QAAM,CAAC4B;AAAvB,KACGH,KAAK,CAACI,GAANJ,CAAWK,IAAD,IACThC;AAAOiC,OAAG,EAAED,IAAI,CAACJ,KAAjB;AAAwB3B,aAAS,EAAEC,QAAM,CAACgC;AAA1C,KACElC;AACE6B,YAAQ,EAAE,MAAMA,QAAQ,CAACH,EAAD,EAAKM,IAAI,CAACJ,KAAV,CAD1B;AAEEO,QAAI,EAAC,OAFP;AAGEC,QAAI,EAAEV,EAHR;AAIEE,SAAK,EAAEI,IAAI,CAACJ,KAJd;AAKE3B,aAAS,EAAEC,QAAM,CAACmC,KALpB;AAMEC,WAAO,EAAEN,IAAI,CAACJ,KAALI,KAAeJ;AAN1B,IADF5B,EASGgC,IAAI,CAACE,KATRlC,CADD2B,CADH3B,CANwB;AAAA,CAAnB;;ACWA,MAAMuC,aAAa,GAAG;AAAA,MAAC;AAC5BC,gBAD4B;AAE5Bb,SAF4B;AAG5Bc,iBAH4B;AAI5BZ;AAJ4B,GAAD;AAM3B,QAAM,CAACa,MAAD,EAASC,SAAT,IAAsBC,QAAQ,CAACH,aAAD,CAApC;AAEA,SACEzC;AAAKC,aAAS,EAAEC,QAAM,CAACC;AAAvB,KACEH;AAAOC,aAAS,EAAEC,QAAM,CAAC2C;AAAzB,KACGlB,KAAK,CAACI,GAANJ,CAAWK,IAAD,IACThC;AAAIiC,OAAG,EAAED,IAAI,CAACN;AAAd,KACE1B,gCACEA;AAAMC,aAAS,KAAKC,QAAM,CAAC8B,IAAI,CAACc,MAAN,KAAiB5C,QAAM,CAAC4C;AAAlD,KACGd,IAAI,CAACc,MADR9C,CADFA,CADFA,EAMEA,gCACGgC,IAAI,CAACe,QADR/C,EAEEA;AAAKC,aAAS,EAAEC,QAAM,CAAC8C;AAAvB,KAAsChB,IAAI,CAACI,IAA3CpC,CAFFA,CANFA,EAUEA,gCACEA,oBAACyB,UAADzB;AACE6B,YAAQ,EAAE,CAACH,EAAD,EAAKE,KAAL;AACRC,cAAQ,CAACH,EAAD,EAAKE,KAAK,IAAIqB,SAAd,CAARpB;AACAc,eAAS,CAAEO,IAAD,KAAW,EAAE,GAAGA,IAAL;AAAW,SAACxB,EAAD,GAAME;AAAjB,OAAX,CAAD,CAATe;AACD,KAJH;AAKEf,SAAK,EAAEc,MAAM,CAACV,IAAI,CAACN,EAAN,CALf;AAMEA,MAAE,EAAEM,IAAI,CAACN,EANX;AAOEC,SAAK,EAAE,CACL,GAAGa,YADE,EAEL;AACEN,WAAK,EAAE,QADT;AAEEN,WAAK,EAAE;AAFT,KAFK;AAPT,IADF5B,CAVFA,CADD2B,CADH3B,CADFA,CADF;AARK;;;;;;;ACdA,MAAMmD,UAAU,GAAG;AAAA,MAAC;AAAEC;AAAF,GAAD;;AACxB,QAAMC,YAAY,GAAIC,KAAD;AACnB,UAAMC,IAAI,GAAGD,KAAK,CAACE,MAANF,CAAaG,KAA1B;;AACA,QAAIF,IAAI,IAAIA,IAAI,CAAC,CAAD,CAAhB,EAAqB;AACnB,YAAMG,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAD,YAAM,CAACE,MAAPF,GAAgBG,gBAAhBH;AACAA,YAAM,CAACI,UAAPJ,CAAkBH,IAAI,CAAC,CAAD,CAAtBG;AACD;AANH;;AAQA,QAAMG,gBAAgB,GAAIP,KAAD;AACvB,QAAIA,KAAK,CAACE,MAANF,IAAgB,OAAOA,KAAK,CAACE,MAANF,CAAaS,MAApB,KAA+B,QAAnD,EAA6D;AAC3D,YAAMC,IAAI,GAAGC,IAAI,CAACC,KAALD,CAAWX,KAAK,CAACE,MAANF,CAAaS,MAAxBE,CAAb;AACAb,YAAM,CAACY,IAAD,CAANZ;AACD;AAJH;;AAOA,SACEpD;AAAOC,aAAS,EAAEC,QAAM,CAACgC,KAAzB;AAAgCiC,WAAO,EAAC;AAAxC,KACEnE;AAAKC,aAAS,EAAEC,QAAM,CAACkE;AAAvB,uIADFpE,EAEEA;AACE0B,MAAE,EAAC,aADL;AAEEzB,aAAS,EAAEC,QAAM,CAACmE,IAFpB;AAGElC,QAAI,EAAC,MAHP;AAIEN,YAAQ,EAAEwB,YAJZ;AAKEiB,UAAM,EAAC;AALT,IAFFtE,CADF;AAhBK;;ACwBA,MAAMuE,KAAK,GAAG;AAAA,MAAC;AACpBC,UADoB;AAEpBC,gBAFoB;AAGpBnD,WAHoB;AAIpBoD,sBAJoB;AAKpBC,kBALoB;AAMpBC,cANoB;AAOpBC;AAPoB,GAAD;AASnB,QAAM,CAACC,UAAD,EAAaC,eAAb,IAAgCnC,QAAQ,CAAS6B,YAAY,IAAI,EAAzB,CAA9C;AAEA,QAAMjC,YAAY,GAAGwC,OAAO,CAC1B,MACER,MAAM,CAACS,OAAPT,CAAezC,GAAfyC,CAAoBU,GAAD,KAAU;AAC3BtD,SAAK,EAAEsD,GAAG,CAACxD,EADgB;AAE3BQ,SAAK,EAAEgD,GAAG,CAAC9C;AAFgB,GAAV,CAAnBoC,CAFwB,EAM1B,CAACA,MAAD,CAN0B,CAA5B;AASA,SACExE;AAAKC,aAAS,EAAEC,QAAM,CAACC;AAAvB,KACEH,oBAACqB,MAADrB;AAAQsB,WAAO,EAAEA;AAAjB,kBADFtB,EAEEA,oBAACmD,UAADnD;AAAYoD,UAAM,EAAEwB;AAApB,IAFF5E,EAGGwC,YAAY,CAAC2C,MAAb3C,GAAsB,CAAtBA,IACCxC;AAAOC,aAAS,EAAEC,QAAM,CAACkF;AAAzB,KACEpF,gCACEA,gQADFA,EAEEA,gCACEA,oBAACyB,UAADzB;AACE6B,YAAQ,EAAE,CAACwD,CAAD,EAAIzD,KAAJ;AACR8C,wBAAkB,CAAC9C,KAAK,IAAI,IAAV,CAAlB8C;AACAK,qBAAe,CAACnD,KAAD,CAAfmD;AACD,KAJH;AAKEnD,SAAK,EAAEkD,UALT;AAMEpD,MAAE,EAAE,SANN;AAOEC,SAAK,EAAE,CACL,GAAGa,YADE,EAEL;AACEN,WAAK,EAAE,SADT;AAEEN,WAAK,EAAE;AAFT,KAFK;AAPT,IADF5B,CAFFA,CADFA,CAJJA,EA2BGwE,MAAM,CAACc,OAAPd,CAAeW,MAAfX,GAAwB,CAAxBA,IACCxE,oBAACuC,aAADvC;AACE6B,YAAQ,EAAE8C,cADZ;AAEEnC,gBAAY,EAAEA,YAFhB;AAGEb,SAAK,EAAE6C,MAAM,CAACc,OAHhB;AAIE7C,iBAAa,EAAEoC;AAJjB,IA5BJ7E,CADF;AApBK;;SChCSuF,qBAAqBC;AACnCC,QAAM,CAACC,mBAAPD,GAA8B/E,GAAD;AAC3B8E,OAAG,CAAC9E,GAAD,CAAH8E;AADF;AAGD;;SCGeG,uBACdC,YACA1E;AAGA2E,WAAS,CAAC;AACR,QAAI,CAAC3E,MAAL,EAAa;AACX;AACD;;AAED,UAAM4E,UAAU,GAAGC,SAAS,CAACC,QAAVD,CAAmB;AACpCE,aAAO,CAACC,GAAD,EAAc1B,MAAd;AACL,cAAM2B,IAAI,GAAGP,UAAU,CAACQ,OAAXR,EAAb;AAEA,cAAMS,QAAQ,GAAGF,IAAI,SAAJA,QAAI,WAAJA,QAAI,CAAEG,IAANH,GAAaI,iBAAiB,CAACJ,IAAI,CAACG,IAAN,CAA9BH,GAA4C,IAA7D;AAEA,cAAMK,QAAQ,GAAGL,IAAH,SAAGA,QAAH,WAAGA,GAAH,MAAGA,OAAI,CAAEM,IAAvB;AAEA,cAAM3D,MAAM,GAAG,OAAM,SAAN0B,UAAM,WAANA,kBAAM,CAAE1B,MAAR,KAAkB,KAAjC;AACA,cAAM4D,MAAM,GAAGL,QAAQ,GACnBT,UAAU,CAACe,QAAXf,CAAoB;AAAES,kBAAF;AAAYvD,gBAAZ;AAAoBoD,aAApB;AAAyBM;AAAzB,SAApBZ,CADmB,GAEnBM,GAFJ;AAGA,eAAO,CAACQ,MAAD,EAASlC,MAAT,CAAP;AACD;;AAbmC,KAAnBuB,CAAnB;AAgBA,WAAO;AACLD,gBAAU;AADZ;AArBO,KAwBN,CAACF,UAAD,EAAa1E,MAAb,CAxBM,CAAT2E;AA2BAA,WAAS,CAAC;AACR,QAAI,CAAC3E,MAAL,EAAa;AACX;AACD;;AACD,UAAM0F,IAAI,GAAGC,cAAc,CAACC,SAAfD,CAAyBD,IAAtC;;AAEAC,kBAAc,CAACC,SAAfD,CAAyBD,IAAzBC,GAAgC,UAC9B/D,MAD8B,EAE9BoD,GAF8B;AAI9B,YAAMa,SAAS,GAAG,OAAOb,GAAP,KAAe,QAAf,GAA0BA,GAA1B,GAAgCA,GAAG,CAACc,QAAJd,EAAlD;AAEA,YAAMC,IAAI,GAAGP,UAAU,CAACQ,OAAXR,EAAb;AAEA,YAAMY,QAAQ,GAAGL,IAAH,SAAGA,QAAH,WAAGA,GAAH,MAAGA,OAAI,CAAEM,IAAvB;AAEA,YAAMJ,QAAQ,GAAGF,IAAI,SAAJA,QAAI,WAAJA,QAAI,CAAEG,IAANH,GAAaI,iBAAiB,CAACJ,IAAI,CAACG,IAAN,CAA9BH,GAA4C,IAA7D;AAEA,YAAMO,MAAM,GAAGL,QAAQ,GACnBT,UAAU,CAACe,QAAXf,CAAoB;AAClBS,gBADkB;AAElBvD,cAFkB;AAGlBoD,WAAG,EAAEa,SAHa;AAIlBP;AAJkB,OAApBZ,CADmB,GAOnBmB,SAPJ;AASAE,eAAS,CAAC,CAAD,CAATA,GAAeP,MAAfO;AACAL,UAAI,CAACM,KAALN,CAAW,IAAXA,EAAiBK,SAAjBL;AAtBF;;AAyBA,WAAO;AACLC,oBAAc,CAACC,SAAfD,CAAyBD,IAAzBC,GAAgCD,IAAhCC;AADF;AA/BO,KAkCN,CAACjB,UAAD,EAAa1E,MAAb,CAlCM,CAAT2E;AAmCD;;AC1CD,MAAMsB,UAAU,GAAIjB,GAAD,KAA6B;AAC9CxE,IAAE,EAAEwE,GAAG,CAACxE,EADsC;AAE9CoB,QAAM,EAAEoD,GAAG,CAACpD,MAFkC;AAG9CC,UAAQ,EAAEmD,GAAG,CAACnD,QAHgC;AAI9CX,MAAI,EAAE8D,GAAG,CAAC9D;AAJoC,CAA7B,CAAnB;;AAMA,MAAMgF,UAAU,GAAIlC,GAAD,KAA6B;AAAExD,IAAE,EAAEwD,GAAG,CAACxD,EAAV;AAAcU,MAAI,EAAE8C,GAAG,CAAC9C;AAAxB,CAA7B,CAAnB;;AAEA,MAAaiF,UAAU,GAAG;AAAA,MAAC;AACzBrG,YADyB;AAEzBsG,YAFyB;AAGzBC,WAHyB;AAIzBrG;AAJyB,GAAD;AAMxB,QAAMsG,MAAM,GAAGxC,OAAO,CAAC;AACrB,WAAOyC,gBAAgB,CAACH,QAAD,EAAWC,OAAX,CAAvB;AADoB,KAEnB,CAACD,QAAD,EAAWC,OAAX,CAFmB,CAAtB;AAGA,QAAM,CAACpB,IAAD,EAAOuB,OAAP,IAAkB9E,QAAQ,CAAmB4E,MAAM,CAACpB,OAAPoB,EAAnB,CAAhC;AAEA,QAAM,CAACG,QAAD,EAAWC,SAAX,IAAwBhF,QAAQ,CAAC1B,MAAD,CAAtC;AAEA2E,WAAS,CAAC;AACRN,wBAAoB,CAACqC,SAAD,CAApBrC;AADO,KAEN,CAACqC,SAAD,CAFM,CAAT/B;AAIAF,wBAAsB,CAAC6B,MAAD,EAASG,QAAQ,IAAI,KAArB,CAAtBhC;AAEA,QAAM,CAACkC,MAAD,EAASC,OAAT,IAAoBlF,QAAQ,CAAC,KAAD,CAAlC;AAEA,QAAMmF,YAAY,GAAGC,WAAW,CAAC;AAC/BF,WAAO,CAAEG,SAAD,IAAe,CAACA,SAAjB,CAAPH;AAD8B,KAE7B,EAF6B,CAAhC;;AAIA,QAAMI,sBAAsB,GAAIC,KAAD;AAC7BX,UAAM,CAACY,YAAPZ,CAAoBW,KAApBX;AADF;;AAIA,QAAMa,kBAAkB,GAAG,CAACC,KAAD,EAAgBH,KAAhB;AACzBX,UAAM,CAACe,SAAPf,CAAiBc,KAAjBd,EAAwBW,KAAxBX;AADF;;AAIA,QAAMgB,cAAc,GAAIC,IAAD;AACrBjB,UAAM,CAACE,OAAPF,CAAeiB,IAAfjB;AACAE,WAAO,CAACF,MAAM,CAACpB,OAAPoB,EAAD,CAAPE;AAFF;;AAIA,QAAMlD,MAAM,GAAG;AACbc,WAAO,EAAE,KAAI,SAAJa,QAAI,WAAJA,gBAAI,CAAEG,IAANH,CAAWpE,GAAXoE,CAAegB,UAAfhB,MAA8B,EAD1B;AAEblB,WAAO,EAAE,KAAI,SAAJkB,QAAI,WAAJA,gBAAI,CAAEM,IAANN,CAAWpE,GAAXoE,CAAeiB,UAAfjB,MAA8B;AAF1B,GAAf;;AAKA,MAAI,CAACwB,QAAL,EAAe;AACb,WAAO3H,oBAAC0I,QAAD1I,QAAWgB,QAAXhB,CAAP;AACD;;AAED,QAAM2I,gBAAgB,GAA2B,EAAjD;AAEAnE,QAAM,CAACc,OAAPd,CAAeoE,OAAfpE,CAAwB0B,GAAD;AACrB,UAAMiC,KAAK,GAAGX,MAAM,CAACqB,SAAPrB,CAAiBtB,GAAG,CAACxE,EAArB8F,CAAd;AAEAmB,oBAAgB,CAACzC,GAAG,CAACxE,EAAL,CAAhBiH,GAA2BR,KAAK,IAAI,EAApCQ;AAHF;AAMA,SACE3I,oBAAC0I,QAAD1I,QACEA;AAAKC,aAAS,EAAEC,MAAM,CAAC4I;AAAvB,KAA6B9H,QAA7BhB,CADFA,EAEEA;AAAKC,aAAS,EAAEC,MAAM,CAACsB;AAAvB,KACExB,oBAACF,WAADE;AAAaD,WAAO,EAAEgI;AAAtB,IADF/H,CAFFA,EAKG6H,MAAM,IACL7H;AAAKC,aAAS,EAAEC,MAAM,CAAC6I;AAAvB,KACE/I;AAAKC,aAAS,EAAEC,MAAM,CAAC8I;AAAvB,IADFhJ,EAEEA;AAAKC,aAAS,EAAEC,MAAM,CAAC+I;AAAvB,KACEjJ,oBAACuE,KAADvE;AACE4E,cAAU,EAAE4D,cADd;AAEEhE,UAAM,EAAEA,MAFV;AAGEC,gBAAY,EAAE+C,MAAM,CAAC0B,YAAP1B,EAHhB;AAIElG,WAAO,EAAEyG,YAJX;AAKErD,sBAAkB,EAAEwD,sBALtB;AAMEvD,kBAAc,EAAE0D,kBANlB;AAOExD,uBAAmB,EAAE8D;AAPvB,IADF3I,CAFFA,CANJA,CADF;AAtDK,CAAP","names":["PanelButton","onClick","React","className","styles","wrapper","xmlns","viewBox","width","height","d","isString","val","classNames","filter","join","Button","memo","children","transparent","active","CloseIcon","props","Header","onClose","title","action","RadioGroup","id","items","value","onChange","group","map","item","key","label","type","name","input","checked","EndpointsList","environments","initialValues","values","setValues","useState","endpointsTable","method","template","endpointName","undefined","prev","UploadSpec","onLoad","handleChange","event","blob","target","files","reader","FileReader","onload","handleReaderLoad","readAsText","result","json","JSON","parse","htmlFor","text","hide","accept","Panel","config","defaultEnvId","onChangeDefaultEnv","onChangeUrlEnv","onLoadSpec","urlEnvInitialValues","defaultEnv","setDefaultValue","useMemo","envList","env","length","defaultControls","_","urlList","addConsoleActivation","set","window","setPathfinderActive","useRequestInterception","pathfinder","useEffect","unregister","intercept","register","request","url","spec","getSpec","matchers","urls","createUrlMatchers","envSpecs","envs","newUrl","buildUrl","open","XMLHttpRequest","prototype","urlString","toString","arguments","apply","toPanelUrl","toPanelEnv","Pathfinder","resolver","storage","module","createPathFinder","setSpec","isActive","setActive","isOpen","setOpen","handleToggle","useCallback","prevState","handleChangeDefaultEnv","envId","setGlobalEnv","handleChangeUrlEnv","urlId","setUrlEnv","handleLoadSpec","data","Fragment","initialUrlValues","forEach","getUrlEnv","app","container","overlay","content","getGlobalEnv"],"sources":["../src/shared/ui/atoms/panel-button/panel-button.tsx","../src/shared/ui/utils/class-names.ts","../src/shared/ui/atoms/button/button.tsx","../src/shared/ui/atoms/close-icon/close-icon.tsx","../src/shared/ui/molecules/header/header.tsx","../src/shared/ui/molecules/radio-group/radio-group.tsx","../src/shared/ui/organisms/endpoints-list/endpoints-list.tsx","../src/shared/ui/molecules/upload-spec/upload-spec.tsx","../src/shared/ui/organisms/panel/panel.tsx","../src/features/hidden-activation/index.ts","../src/processes/request-interception/hooks.ts","../src/app/pathfinder.tsx"],"sourcesContent":["import React from 'react'\nimport styles from './panel-button.module.css'\n\ntype Props = {\n  onClick: () => void\n}\n\nexport const PanelButton = ({ onClick }: Props) => {\n  return (\n    <button className={styles.wrapper} onClick={onClick}>\n      <svg\n        xmlns='http://www.w3.org/2000/svg'\n        viewBox='0 0 480 480'\n        width={16}\n        height={16}\n      >\n        <path d='M296 280h-8.8a7.873 7.873 0 01-7.408-5.168 130.268 130.268 0 00-3.152-7.544 7.888 7.888 0 011.6-8.928l6.272-6.28c9.311-9.393 9.294-24.541-.04-33.912l-22.608-22.608c-9.383-9.328-24.537-9.328-33.92 0l-6.272 6.264a7.921 7.921 0 01-8.928 1.6 172.395 172.395 0 00-7.552-3.2A7.864 7.864 0 01200 192.8V184c0-13.255-10.745-24-24-24h-32c-13.255 0-24 10.745-24 24v8.8a7.873 7.873 0 01-5.168 7.408c-2.56.976-5.064 2.024-7.544 3.152a7.91 7.91 0 01-8.928-1.6l-6.28-6.272c-9.382-9.322-24.53-9.322-33.912 0l-22.608 22.68c-9.328 9.383-9.328 24.537 0 33.92l6.264 6.272a7.888 7.888 0 011.6 8.928 133.954 133.954 0 00-3.16 7.552A7.863 7.863 0 0132.8 280H24c-13.255 0-24 10.745-24 24v32c0 13.255 10.745 24 24 24h8.8a7.873 7.873 0 017.408 5.168c.976 2.56 2.024 5.064 3.152 7.544a7.888 7.888 0 01-1.6 8.928l-6.272 6.28c-9.322 9.382-9.322 24.53 0 33.912l22.608 22.608c9.383 9.328 24.537 9.328 33.92 0l6.272-6.264a7.921 7.921 0 018.928-1.6 172.395 172.395 0 007.552 3.2A7.865 7.865 0 01120 447.2v8.8c0 13.255 10.745 24 24 24h32c13.255 0 24-10.745 24-24v-8.8a7.873 7.873 0 015.168-7.408c2.56-.976 5.064-2.024 7.544-3.152a7.91 7.91 0 018.928 1.6l6.28 6.272c9.395 9.307 24.539 9.289 33.912-.04l22.608-22.608c9.328-9.383 9.328-24.537 0-33.92l-6.264-6.272a7.888 7.888 0 01-1.6-8.928 172.395 172.395 0 003.2-7.552A7.864 7.864 0 01287.2 360h8.8c13.255 0 24-10.745 24-24v-32c0-13.255-10.745-24-24-24zm8 56a8 8 0 01-8 8h-8.8a24.08 24.08 0 00-22.4 15.472 110.562 110.562 0 01-2.752 6.616 24.071 24.071 0 004.8 26.848l6.256 6.264a8 8 0 01.006 11.314l-.006.006-22.608 22.608a8 8 0 01-11.312 0l-6.272-6.264a24.048 24.048 0 00-26.848-4.8 115.916 115.916 0 01-6.6 2.752A24.073 24.073 0 00184 447.2v8.8a8 8 0 01-8 8h-32a8 8 0 01-8-8v-8.8a24.08 24.08 0 00-15.472-22.4 110.562 110.562 0 01-6.616-2.752 24.08 24.08 0 00-26.848 4.8l-6.264 6.256a8 8 0 01-11.314.006l-.006-.006-22.608-22.584a8 8 0 010-11.312l6.264-6.272a24.071 24.071 0 004.8-26.848 115.916 115.916 0 01-2.752-6.6A24.072 24.072 0 0032.8 344H24a8 8 0 01-8-8v-32a8 8 0 018-8h8.8a24.08 24.08 0 0022.4-15.472c.848-2.24 1.765-4.445 2.752-6.616a24.073 24.073 0 00-4.8-26.848l-6.288-6.264a8 8 0 01-.006-11.314l.006-.006 22.608-22.608a8 8 0 0111.312 0l6.272 6.264a24.048 24.048 0 0026.848 4.8 115.916 115.916 0 016.6-2.752A24.072 24.072 0 00136 192.8V184a8 8 0 018-8h32a8 8 0 018 8v8.8a24.08 24.08 0 0015.472 22.4c2.24.848 4.445 1.765 6.616 2.752a24.048 24.048 0 0026.848-4.8l6.264-6.256a8.048 8.048 0 0111.32 0l22.608 22.608a8 8 0 010 11.312l-6.264 6.272a24.073 24.073 0 00-4.8 26.848 115.916 115.916 0 012.752 6.6A24.073 24.073 0 00287.2 296h8.8a8 8 0 018 8v32z' />\n        <path d='M231.84 316.8a72.249 72.249 0 00-.448-5.736c-.256-2.048-.56-4.08-.984-6.072-.28-1.304-.648-2.592-1-3.888a71.595 71.595 0 00-1.512-4.872c-.392-1.112-.8-2.216-1.216-3.312a71.27 71.27 0 00-3.528-7.488c-.104-.184-.168-.384-.272-.568a70.969 70.969 0 00-7.2-10.488c-.232-.288-.496-.56-.736-.84a66.945 66.945 0 00-3.432-3.776c-.624-.648-1.28-1.256-1.936-1.88-.8-.744-1.6-1.48-2.4-2.184a75.684 75.684 0 00-2.968-2.448l-1.312-.976A71.492 71.492 0 00160 248c-.8 0-1.6.12-2.4.152a69.66 69.66 0 00-5.136.32c-.904.096-1.816.2-2.72.328a73.35 73.35 0 00-7.752 1.448c-38.521 9.954-61.679 49.252-51.725 87.773a72.04 72.04 0 0051.781 51.739c.128 0 .264.04.4.072a76.301 76.301 0 008.384 1.6c1.864.232 3.728.28 5.6.368 1.248.064 2.4.248 3.704.248 2.28 0 4.648-.152 7.064-.392.256 0 .512-.072.8-.104a69.433 69.433 0 005.92-.904c.8-.152 1.544-.352 2.312-.528a75.52 75.52 0 004.248-1.096c1.12-.336 2.208-.728 3.304-1.112 1.096-.384 2.232-.8 3.368-1.232 1.136-.432 2.088-.928 3.12-1.408 1.344-.616 2.68-1.224 4-1.944h.048a94.691 94.691 0 0020.504-14.808 25.19 25.19 0 004.288-5.248 85.402 85.402 0 0012.048-32.88c.224-1.544.424-3.088.544-4.664.112-1.448.192-2.888.224-4.328 0-.456.064-.888.064-1.344.008-1.128-.104-2.168-.152-3.256zm-15.944 5.24c0 .664-.056 1.328-.096 1.984a63.065 63.065 0 01-.72 5.816 56.117 56.117 0 01-28.112 39.2 62.597 62.597 0 01-2.944 1.456l-.664.32a57.782 57.782 0 01-14.592 4.416c-.352.056-.712.12-1.072.168-1 .144-1.984.264-2.96.352a56.915 56.915 0 01-3.904.2h-1.672a56.13 56.13 0 01-5.664-.352l-.96-.112a59.2 59.2 0 01-6.536-1.232c-29.962-7.669-48.034-38.175-40.366-68.137a55.998 55.998 0 0140.31-40.351v-.008A57.931 57.931 0 01160 264a55.29 55.29 0 016.84.464c.608.072 1.208.184 1.808.272 1.728.272 3.44.616 5.128 1.048.552.144 1.104.272 1.648.424a56.491 56.491 0 0112.2 5.136c.616.36 1.216.736 1.824 1.112 1.264.8 2.488 1.6 3.696 2.512.648.472 1.304.936 1.928 1.44a57.721 57.721 0 014.504 4c.568.576 1.088 1.208 1.64 1.808.92 1 1.816 2.024 2.672 3.104a60.96 60.96 0 011.72 2.288c.8 1.152 1.6 2.352 2.32 3.568.4.664.8 1.312 1.208 1.992a54.898 54.898 0 012.752 5.864c.32.8.592 1.6.88 2.4.52 1.472.968 2.96 1.36 4.464.2.8.424 1.512.592 2.288.467 2.162.806 4.35 1.016 6.552.048.584.048 1.176.088 1.76.112 1.84.144 3.688.072 5.544zM456 168h-25.16a7.809 7.809 0 01-7.456-5.248 166.619 166.619 0 00-8.984-21.688 7.832 7.832 0 011.536-9.032l17.84-17.864c9.364-9.371 9.364-24.557 0-33.928L399.76 46.28c-9.371-9.364-24.557-9.364-33.928 0L348 64.104a7.832 7.832 0 01-9.024 1.544 166.2 166.2 0 00-21.696-9.032A7.808 7.808 0 01312 49.16V24c0-13.255-10.745-24-24-24h-48c-13.255 0-24 10.745-24 24v25.16a7.807 7.807 0 01-5.248 7.456 166.721 166.721 0 00-21.688 9.024 7.816 7.816 0 01-9.032-1.536l-17.864-17.84c-9.382-9.337-24.546-9.337-33.928 0L94.288 80.216c-9.369 9.372-9.369 24.564 0 33.936l26.232 26.28a8 8 0 0011.328-11.296L105.6 102.864a8 8 0 010-11.312L139.552 57.6a8 8 0 0111.312 0l17.872 17.84a23.784 23.784 0 0027.488 4.512 151.357 151.357 0 0119.608-8.152A23.8 23.8 0 00232 49.16V24a8 8 0 018-8h48a8 8 0 018 8v25.16a23.791 23.791 0 0016.168 22.632 150.888 150.888 0 0119.616 8.16 23.841 23.841 0 0027.48-4.52L377.136 57.6a8 8 0 0111.312 0L422.4 91.56a8 8 0 010 11.304l-17.84 17.872a23.808 23.808 0 00-4.512 27.488 151.357 151.357 0 018.152 19.608A23.791 23.791 0 00430.84 184H456a8 8 0 018 8v48a8 8 0 01-8 8h-25.16a23.791 23.791 0 00-22.632 16.168 150.75 150.75 0 01-8.16 19.616 23.817 23.817 0 004.52 27.48l17.84 17.872a8 8 0 010 11.312L388.44 374.4a8 8 0 01-11.304 0l-26.288-26.232a8 8 0 00-11.312-.18 8 8 0 00.016 11.508l26.28 26.232c9.371 9.364 24.557 9.364 33.928 0l33.952-33.944c9.369-9.372 9.369-24.564 0-33.936L415.896 300a7.84 7.84 0 01-1.544-9.024 166.2 166.2 0 009.032-21.696 7.808 7.808 0 017.456-5.28H456c13.255 0 24-10.745 24-24v-48c0-13.255-10.745-24-24-24z' />\n        <path d='M337.536 142.464c-40.638-40.553-106.434-40.553-147.072 0a8 8 0 0011.312 11.312c34.135-34.596 89.852-34.969 124.448-.834 34.596 34.135 34.969 89.852.834 124.448-.276.28-.554.558-.834.834a8 8 0 00-.196 11.312 8 8 0 0011.508 0c40.553-40.638 40.553-106.434 0-147.072z' />\n      </svg>\n    </button>\n  )\n}\n\nexport default PanelButton\n","function isString<T>(val: T) {\n  return typeof val === 'string';\n}\n\nexport function classNames<T>(val: T[]) {\n  return val.filter(isString).join(' ');\n}\n","import React from 'react'\nimport { memo, MouseEventHandler, ReactNode } from 'react'\nimport styles from './button.module.css'\nimport { classNames } from '../../utils/class-names'\n\ntype Props = {\n  children: ReactNode\n  transparent?: boolean\n  active?: boolean\n  onClick?: MouseEventHandler<HTMLButtonElement>\n}\n\nexport const Button = memo(\n  ({ children, transparent, active, onClick }: Props) => (\n    <button\n      className={classNames([\n        styles.wrapper,\n        transparent && styles.transparent,\n        active && styles.active\n      ])}\n      onClick={onClick}\n    >\n      {children}\n    </button>\n  )\n)\n\nexport default Button\n","import React from 'react'\nimport { memo, SVGProps } from 'react'\n\nexport const CloseIcon = memo((props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 329.269 329' {...props}>\n    <path d='M194.8 164.77L323.013 36.555c8.343-8.34 8.343-21.825 0-30.164-8.34-8.34-21.825-8.34-30.164 0L164.633 134.605 36.422 6.391c-8.344-8.34-21.824-8.34-30.164 0-8.344 8.34-8.344 21.824 0 30.164l128.21 128.215L6.259 292.984c-8.344 8.34-8.344 21.825 0 30.164a21.266 21.266 0 0015.082 6.25c5.46 0 10.922-2.09 15.082-6.25l128.21-128.214 128.216 128.214a21.273 21.273 0 0015.082 6.25c5.46 0 10.922-2.09 15.082-6.25 8.343-8.34 8.343-21.824 0-30.164zm0 0' />\n  </svg>\n))\n\nexport default CloseIcon\n","import React from 'react'\nimport { Button } from '../../atoms/button'\nimport { memo, MouseEventHandler, ReactNode } from 'react'\nimport { CloseIcon } from '../../atoms/close-icon'\nimport styles from './header.module.css'\n\ntype Props = {\n  children: ReactNode\n  onClose: MouseEventHandler<HTMLButtonElement>\n}\n\nexport const Header = memo(({ children, onClose }: Props) => (\n  <div className={styles.wrapper}>\n    <h1 className={styles.title}>{children}</h1>\n    <div className={styles.action}>\n      <Button transparent onClick={onClose}>\n        <CloseIcon width={16} height={16} />\n      </Button>\n    </div>\n  </div>\n))\n\nexport default Header\n","import React from 'react'\nimport styles from './radio-group.module.css'\nimport { TOption } from './types'\n\ntype TRadiogroupProps = {\n  items: TOption[]\n  id: string\n  onChange: (id: string, value: string) => void\n  value?: string\n}\n\nexport const RadioGroup = ({\n  id,\n  items,\n  value,\n  onChange\n}: TRadiogroupProps) => (\n  <div className={styles.group}>\n    {items.map((item) => (\n      <label key={item.value} className={styles.label}>\n        <input\n          onChange={() => onChange(id, item.value)}\n          type='radio'\n          name={id}\n          value={item.value}\n          className={styles.input}\n          checked={item.value === value}\n        />\n        {item.label}\n      </label>\n    ))}\n  </div>\n)\n\nexport default RadioGroup\n","import React from 'react'\nimport { useState } from 'react'\nimport styles from './endpoints-list.module.css'\n\nimport { RadioGroup } from '../../molecules/radio-group'\nimport { TOption } from '../../molecules/radio-group/types'\n\nexport type UrlItem = {\n  id: string\n  method: string\n  template: string\n  name: string\n}\n\ntype Props = {\n  className?: string\n  environments: TOption[]\n  items: UrlItem[]\n  initialValues: Record<string, string>\n  onChange: (urlId: string, envId?: string) => void\n}\n\nexport const EndpointsList = ({\n  environments,\n  items,\n  initialValues,\n  onChange\n}: Props) => {\n  const [values, setValues] = useState(initialValues)\n\n  return (\n    <div className={styles.wrapper}>\n      <table className={styles.endpointsTable}>\n        {items.map((item) => (\n          <tr key={item.id}>\n            <td>\n              <span className={`${styles[item.method]} ${styles.method}`}>\n                {item.method}\n              </span>\n            </td>\n            <td>\n              {item.template}\n              <div className={styles.endpointName}>{item.name}</div>\n            </td>\n            <td>\n              <RadioGroup\n                onChange={(id, value) => {\n                  onChange(id, value || undefined)\n                  setValues((prev) => ({ ...prev, [id]: value }))\n                }}\n                value={values[item.id]}\n                id={item.id}\n                items={[\n                  ...environments,\n                  {\n                    label: 'Global',\n                    value: ''\n                  }\n                ]}\n              />\n            </td>\n          </tr>\n        ))}\n      </table>\n    </div>\n  )\n}\n\nexport default EndpointsList\n","import React from 'react'\nimport { ChangeEvent } from 'react'\nimport styles from './upload-spec.module.css'\n\ntype Props = {\n  onLoad: (data: any) => void\n}\n\nexport const UploadSpec = ({ onLoad }: Props) => {\n  const handleChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const blob = event.target.files\n    if (blob && blob[0]) {\n      const reader = new FileReader()\n      reader.onload = handleReaderLoad\n      reader.readAsText(blob[0])\n    }\n  }\n  const handleReaderLoad = (event: ProgressEvent<FileReader>) => {\n    if (event.target && typeof event.target.result === 'string') {\n      const json = JSON.parse(event.target.result)\n      onLoad(json)\n    }\n  }\n\n  return (\n    <label className={styles.label} htmlFor='upload-spec'>\n      <div className={styles.text}>Загрузить спецификацию</div>\n      <input\n        id='upload-spec'\n        className={styles.hide}\n        type='file'\n        onChange={handleChange}\n        accept='application/json'\n      />\n    </label>\n  )\n}\n","import React, { useMemo, useState } from 'react'\nimport styles from './panel.module.css'\n\nimport { Header } from '../../molecules/header'\nimport { EndpointsList } from '../../organisms/endpoints-list'\nimport { UploadSpec } from '../../molecules/upload-spec/upload-spec'\nimport { RadioGroup } from '../../molecules/radio-group'\nimport { TOption } from '../../molecules/radio-group/types'\n\nexport type PanelEnv = { id: string; name: string }\nexport type PanelUrl = {\n  id: string\n  method: string\n  template: string\n  name: string\n}\nexport type Config = {\n  envList: PanelEnv[]\n  urlList: PanelUrl[]\n}\n\ntype Props = {\n  config: Config\n  defaultEnvId: string\n  urlEnvInitialValues: Record<string, string>\n\n  onClose: () => void\n  onChangeDefaultEnv: (envId: string | null) => void\n  onChangeUrlEnv: (urlId: string, envId?: string) => void\n  onLoadSpec: (data: unknown) => void\n}\n\nexport const Panel = ({\n  config,\n  defaultEnvId,\n  onClose,\n  onChangeDefaultEnv,\n  onChangeUrlEnv,\n  onLoadSpec,\n  urlEnvInitialValues\n}: Props) => {\n  const [defaultEnv, setDefaultValue] = useState<string>(defaultEnvId || '')\n\n  const environments = useMemo<TOption[]>(\n    () =>\n      config.envList.map((env) => ({\n        value: env.id,\n        label: env.name\n      })),\n    [config]\n  )\n\n  return (\n    <div className={styles.wrapper}>\n      <Header onClose={onClose}>Pathfinder</Header>\n      <UploadSpec onLoad={onLoadSpec} />\n      {environments.length > 0 && (\n        <table className={styles.defaultControls}>\n          <tr>\n            <td>Использовать окружение для всех запросов:</td>\n            <td>\n              <RadioGroup\n                onChange={(_, value) => {\n                  onChangeDefaultEnv(value || null)\n                  setDefaultValue(value)\n                }}\n                value={defaultEnv}\n                id={'default'}\n                items={[\n                  ...environments,\n                  {\n                    label: 'Default',\n                    value: ''\n                  }\n                ]}\n              />\n            </td>\n          </tr>\n        </table>\n      )}\n      {config.urlList.length > 0 && (\n        <EndpointsList\n          onChange={onChangeUrlEnv}\n          environments={environments}\n          items={config.urlList}\n          initialValues={urlEnvInitialValues}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default Panel\n","export function addConsoleActivation(set: (val: boolean) => void) {\n  window.setPathfinderActive = (val: boolean) => {\n    set(val);\n  };\n}\n","import intercept from 'fetch-intercept'\nimport {\n  createUrlMatchers,\n  Pathfinder\n} from '@kode-frontend/pathfinder-web-core'\nimport { useEffect } from 'react'\n\nexport function useRequestInterception(\n  pathfinder: Pathfinder,\n  active: boolean\n) {\n  // fetch\n  useEffect(() => {\n    if (!active) {\n      return\n    }\n\n    const unregister = intercept.register({\n      request(url: string, config: any): Promise<any[]> | any[] {\n        const spec = pathfinder.getSpec()\n\n        const matchers = spec?.urls ? createUrlMatchers(spec.urls) : null\n\n        const envSpecs = spec?.envs\n\n        const method = config?.method || 'GET'\n        const newUrl = matchers\n          ? pathfinder.buildUrl({ matchers, method, url, envSpecs })\n          : url\n        return [newUrl, config]\n      }\n    })\n\n    return () => {\n      unregister()\n    }\n  }, [pathfinder, active])\n\n  // XMLHttpRequest\n  useEffect(() => {\n    if (!active) {\n      return\n    }\n    const open = XMLHttpRequest.prototype.open\n\n    XMLHttpRequest.prototype.open = function (\n      method: string,\n      url: string | URL\n    ) {\n      const urlString = typeof url === 'string' ? url : url.toString()\n\n      const spec = pathfinder.getSpec()\n\n      const envSpecs = spec?.envs\n\n      const matchers = spec?.urls ? createUrlMatchers(spec.urls) : null\n\n      const newUrl = matchers\n        ? pathfinder.buildUrl({\n            matchers,\n            method,\n            url: urlString,\n            envSpecs\n          })\n        : urlString\n\n      arguments[1] = newUrl\n      open.apply(this, arguments as any)\n    }\n\n    return () => {\n      XMLHttpRequest.prototype.open = open\n    }\n  }, [pathfinder, active])\n}\n","import React, {\n  Fragment,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState\n} from 'react'\nimport styles from './pathfinder.module.css'\nimport { PanelButton } from '../shared/ui/atoms/panel-button/index'\nimport { Panel } from '../shared/ui/organisms/panel/index'\n\nimport {\n  createPathFinder,\n  DataResolver,\n  DataStorage,\n  EnvSpec,\n  Spec,\n  UrlSpec\n} from '@kode-frontend/pathfinder-web-core'\n\nimport { addConsoleActivation } from '../features/hidden-activation'\nimport { useRequestInterception } from '../processes/request-interception'\n\nimport { PanelEnv, PanelUrl } from '../shared/ui/organisms/panel/panel'\n\ntype PathfinderProviderProps = {\n  children: React.ReactNode\n  storage: DataStorage\n  resolver: DataResolver\n  active?: boolean\n}\n\nconst toPanelUrl = (url: UrlSpec): PanelUrl => ({\n  id: url.id,\n  method: url.method,\n  template: url.template,\n  name: url.name\n})\nconst toPanelEnv = (env: EnvSpec): PanelEnv => ({ id: env.id, name: env.name })\n\nexport const Pathfinder = ({\n  children,\n  resolver,\n  storage,\n  active\n}: PathfinderProviderProps) => {\n  const module = useMemo(() => {\n    return createPathFinder(resolver, storage)\n  }, [resolver, storage])\n  const [spec, setSpec] = useState<Spec | undefined>(module.getSpec())\n\n  const [isActive, setActive] = useState(active)\n\n  useEffect(() => {\n    addConsoleActivation(setActive)\n  }, [setActive])\n\n  useRequestInterception(module, isActive || false)\n\n  const [isOpen, setOpen] = useState(false)\n\n  const handleToggle = useCallback(() => {\n    setOpen((prevState) => !prevState)\n  }, [])\n\n  const handleChangeDefaultEnv = (envId: string | null) => {\n    module.setGlobalEnv(envId)\n  }\n\n  const handleChangeUrlEnv = (urlId: string, envId?: string) => {\n    module.setUrlEnv(urlId, envId)\n  }\n\n  const handleLoadSpec = (data: unknown) => {\n    module.setSpec(data)\n    setSpec(module.getSpec())\n  }\n  const config = {\n    urlList: spec?.urls.map(toPanelUrl) || [],\n    envList: spec?.envs.map(toPanelEnv) || []\n  }\n\n  if (!isActive) {\n    return <Fragment>{children}</Fragment>\n  }\n\n  const initialUrlValues: Record<string, string> = {}\n\n  config.urlList.forEach((url) => {\n    const envId = module.getUrlEnv(url.id)\n\n    initialUrlValues[url.id] = envId || ''\n  })\n\n  return (\n    <Fragment>\n      <div className={styles.app}>{children}</div>\n      <div className={styles.action}>\n        <PanelButton onClick={handleToggle} />\n      </div>\n      {isOpen && (\n        <div className={styles.container}>\n          <div className={styles.overlay} />\n          <div className={styles.content}>\n            <Panel\n              onLoadSpec={handleLoadSpec}\n              config={config}\n              defaultEnvId={module.getGlobalEnv()}\n              onClose={handleToggle}\n              onChangeDefaultEnv={handleChangeDefaultEnv}\n              onChangeUrlEnv={handleChangeUrlEnv}\n              urlEnvInitialValues={initialUrlValues}\n            />\n          </div>\n        </div>\n      )}\n    </Fragment>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}